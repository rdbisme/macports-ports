# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cmake 1.1

github.setup        Coin3D coin 4.0.0 Coin-
fetch.type          git
name                Coin
revision            0
license             BSD
description         cross platform C++ OpenGL scene graph library
long_description    Coin is a high-level 3D graphics library with a   \
                    C++ Application Programming Interface. Coin uses scene-graph data \
                    structures to render real-time graphics suitable for mostly all   \
                    kinds of scientific and engineering visualization applications.

conflicts           Coin-framework
categories          graphics devel
platforms           darwin
maintainers         nomaintainer

homepage            https://github.com/coin3d/coin

distname            ${name}-${version}

checksums           rmd160  201e0c2abb7b90e348e7d2f9c0ee750ab5fe92dd \
                    sha256  b00d2a8e9d962397cf9bf0d9baa81bcecfbd16eef675a98c792f5cf49eb6e805 \
                    size    6788294

patchfiles          cpack_d.patch
patch.pre_args      -p1

depends_lib-append  port:simage \
                    port:fontconfig \
                    port:freetype \
                    port:zlib \
                    port:bzip2

if {${name} eq ${subport}} {

    variant manpages description {Include API documentation in manpages.} {
        depends_build-append    port:doxygen
        configure.args-append   -DCOIN_BUILD_DOCUMENTATION_MAN=ON
        post-destroot {
            file rename ${destroot}${prefix}/share/man/man3/threads.3 \
                ${destroot}${prefix}/share/man/man3/threads-coin.3
            file rename ${destroot}${prefix}/share/man/man3/manips.3 \
                ${destroot}${prefix}/share/man/man3/manips-coin.3
        }
    }
}

subport Coin-framework {
    conflicts               Coin
    revision                0

    configure.args-replace  -DCOIN_BUILD_MAC_FRAMEWORK=OFF \
                            -DCOIN_BUILD_MAC_FRAMEWORK=ON
                            
}

livecheck.type      regex
livecheck.url       https://bitbucket.org/Coin3D/coin/downloads/?tab=downloads
livecheck.regex     ${name}-(\[0-9.\]+)${extract.suffix}
